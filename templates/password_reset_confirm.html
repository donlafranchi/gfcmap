{% extends "index.html" %}

{% block content %}
  <div class="row">
    <div class="col-md-8 offset-md-2">
        <h3 class="mt-4">Password reset confirmation</h3>            
        <!-- Signup form -->
        <form class="form-inline ajax-post" role="form" action="{% url 'rest_password_reset_confirm' %}">
        {% csrf_token %}
          <input name="uid" type="hidden" class="form-control" id="uid" placeholder="Uid">
          <input name="token" type="hidden" class="form-control" id="token" placeholder="Token">

          <div class="form-group col-md-12 mt-3">
            <label for="new_password1" class="col-sm-2 control-label">Password</label>
            <div class="col-sm-10">
              <input name="new_password1" type="password" class="form-control" id="new_password1" placeholder="Password">
            </div>
          </div>

          <div class="form-group col-md-12 mt-3">
            <label for="new_password2" class="col-sm-2 control-label">Repeat password</label>
            <div class="col-sm-10">
              <input name="new_password2" type="password" class="form-control" id="new_password2" placeholder="Repeat password">
            </div>
          </div>

          <div class="form-group col-md-12 mt-3">
            <div class="offset-sm-2 col-sm-10">
              <button type="submit" class="btn btn-default">Set new password</button>
            </div>
          </div>

          <div class="form-group api-response m-5"></div>
        </form>
    </div>
  </div>
{% endblock %}

{% block script %}
    <script type="text/javascript">
        var url_elements = window.location.pathname.split('/');
        if (url_elements.length == 6){
            var uid = url_elements[url_elements.length - 3];
            if (uid !== undefined){
                $('input[name=uid]').val(uid);
            }
            var token = url_elements[url_elements.length - 2];
            if (token !== undefined){
                $('input[name=token]').val(token);
            }
        }
    </script>
{% endblock %}

{% block gis_script %}
{% endblock %}
